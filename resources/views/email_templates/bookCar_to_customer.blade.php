<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>PNR Created</title>
    <style>
        .passengerDetailshe {
            break-inside: avoid;text-align: center;color: #ffb200;
            font-size: 20px;padding: 20px 30px;border-left-width: 1px;border-left-color: rgb(192, 192, 192);
            border-right-width: 1px;border-right-style: solid;
            border-right-color: rgb(192, 192, 192);vertical-align: top;
        }
        .passengerdetails{
            break-inside: avoid;
            text-align: center; color: rgb(108, 108, 108); font-size: 16px; padding: 10px 30px 5px; font-weight: bold;
            border-left-width: 1px; border-left-color: rgb(192, 192, 192);
            border-right-width: 1px;
            border-right-style: solid;
            border-right-color: rgb(192, 192, 192);
            border-bottom-width: 1px;
            border-bottom-style: solid;
            border-bottom-color: rgb(192, 192, 192);
            vertical-align: top;
        }
    </style>

</head>
<body>

<table style="width: 1177px;
                        box-shadow: rgba(0, 0, 0, 0.431373) 2px 3px 3px 1px;
                        caret-color: rgb(0, 0, 0);
                        font-family: Helvetica;
                        font-size: 12px;
                        font-style: normal;
                        font-variant-caps: normal;
                        font-weight: normal;
                        letter-spacing: normal;
                        text-align: start;
                        text-indent: 0px;
                        text-transform: none;
                        white-space: normal;
                        word-spacing: 0px;
                        -webkit-text-stroke-width: 0px;
                        text-decoration: none;
                        background-color: #ffb200;">
    <tbody>
    <tr style="break-inside: avoid;">
        <td style="break-inside: avoid;
                            text-align: center;
                            color: rgb(255, 255, 255);
                            font-size: 16px;
                            padding: 30px;
                            line-height: 27px;
                        ">
            <b>Thank you for booking with:
                <span class="Apple-converted-space">&nbsp;</span>
                <a href="{{ url('/') }}" target="_blank" rel="noreferrer">{{ env('APP_NAME') }}</a>
                <span class="Apple-converted-space">&nbsp;</span>
            </b>
            <br>
            <span>
                        This is an automated message from:
                        <span class="Apple-converted-space">&nbsp;</span>
                        <a href="{{ url('/') }}" target="_blank" rel="noreferrer">{{ env('APP_NAME') }}</a><span class="Apple-converted-space">&nbsp;</span>
                        booking system, please do not reply to this email message.
                        <span class="Apple-converted-space">&nbsp;</span>
                        <br>
                    </span>
        </td>
    </tr>
    </tbody>
</table>

<br style="caret-color: rgb(0, 0, 0);
                    font-family: Helvetica;
                    font-size: 12px;
                    font-style: normal;
                    font-variant-caps: normal;
                    font-weight: normal;
                    letter-spacing: normal;
                    text-align: start;
                    text-indent: 0px;
                    text-transform: none;
                    white-space: normal;
                    word-spacing: 0px;
                    -webkit-text-stroke-width: 0px;
                    background-color: rgb(255, 255, 255);
                    text-decoration: none;">

<table style="width: 1177px;
                    -webkit-box-shadow: rgba(0, 0, 0, 0.431373) 2px 3px 3px 1px;
                    box-shadow: rgba(0, 0, 0, 0.431373) 2px 3px 3px 1px;
                    caret-color: rgb(0, 0, 0);
                    font-family: Helvetica;
                    font-size: 12px;
                    font-style: normal;
                    font-variant-caps: normal;
                    font-weight: normal;
                    letter-spacing: normal;
                    text-align: start;
                    text-indent: 0px;
                    text-transform: none;
                    white-space: normal;
                    word-spacing: 0px;
                    -webkit-text-stroke-width: 0px;
                    text-decoration: none;
                    background-color: rgb(245, 245, 245);">
    <tbody>
    <tr style="break-inside: avoid">
        <td style="break-inside: avoid;
                           width: 506.9375px;
                           text-align: left;
                           color: rgb(108, 108, 108);
                           font-size: 20px;
                           padding: 10px;
                           line-height: 27px;">
            <b>YOUR BOOKING REFERENCE NUMBER: &nbsp;</b>
        </td><td style="break-inside: avoid;
                             text-align: left;
                             color: rgb(108, 108, 108);
                             font-size: 20px;
                             padding: 10px;
                             line-height: 27px;"><span style="text-transform: capitalize; color: rgb(255, 0, 0)">{{ $pnr }}</span>
        </td>
    </tr>
    </tbody>
</table>
<br style="caret-color: rgb(0, 0, 0);
                    font-family: Helvetica;
                    font-size: 12px;
                    font-style: normal;
                    font-variant-caps: normal;
                    font-weight: normal;
                    letter-spacing: normal;
                    text-align: start;
                    text-indent: 0px;
                    text-transform: none;
                    white-space: normal;
                    word-spacing: 0px;
                    -webkit-text-stroke-width: 0px;
                    background-color: rgb(255, 255, 255);
                    text-decoration: none;">

<br style="caret-color: rgb(0, 0, 0);
        font-family: Helvetica;
        font-size: 12px;
        font-style: normal;
        font-variant-caps: normal;
        font-weight: normal;
        letter-spacing: normal;
        text-align: start;
        text-indent: 0px;
        text-transform: none;
        white-space: normal;
        word-spacing: 0px;
        -webkit-text-stroke-width: 0px;
        background-color: rgb(255, 255, 255);
        text-decoration: none;">

<div style="caret-color: rgb(0, 0, 0);
                    font-family: Helvetica;
                    font-size: 12px;
                    font-style: normal;
                    font-variant-caps: normal;
                    font-weight: normal;
                    letter-spacing: normal;
                    text-align: start;
                    text-indent: 0px;
                    text-transform: none;
                    white-space: normal;
                    word-spacing: 0px;
                    -webkit-text-stroke-width: 0px;
                    background-color: rgb(255, 255, 255);
                    text-decoration: none;
                    margin-top: 5px;">

    <table style="width: 1177px;box-shadow: rgba(0, 0, 0, 0.431373) 2px 3px 3px 1px;">
        <tbody>
        <tr style="break-inside: avoid">
            <th colspan="3" style="break-inside: avoid; text-align: left; padding: 12px; font-size: 20px; background-color: #ffb200; color: rgb(255, 255, 255); font-family: &quot;Trebuchet MS&quot;">
                Driver Details
            </th>
        </tr>
        <tr style="break-inside: avoid">
            <th class="passengerDetailsheads">Name</th>
            <th class="passengerDetailsheads">Email</th>
            <th class="passengerDetailsheads">Phone</th>
        </tr>

        @php
            $driverName = $data->driverTitle.' '.$data->driverFirstName.' '.$data->driverLastName
        @endphp

        <tr style="break-inside: avoid">
            <td class="passengerdetails">{{ auth()->guard('api')->check()?auth()->guard('api')->user()->name : $driverName }}</td>
            <td class="passengerdetails">{{ auth()->guard('api')->check()?auth()->guard('api')->user()->email : $data->contact_email }}</td>
            <td class="passengerdetails">{{ auth()->guard('api')->check() ? auth()->guard('api')->user()->phone : $data->contact_phone }}</td>
        </tr>
        </tbody>
    </table>
</div>


<br style="caret-color: rgb(0, 0, 0);
                    font-size: 12px;
                    font-style: normal;
                    font-variant-caps: normal;
                    font-weight: normal;
                    letter-spacing: normal;
                    text-align: start;
                    text-indent: 0px;
                    text-transform: none;
                    white-space: normal;
                    word-spacing: 0px;
                    -webkit-text-stroke-width: 0px;
                    background-color: rgb(255, 255, 255);
                    text-decoration: none;">

<div style="caret-color: rgb(0, 0, 0);
                    font-size: 12px;
                    font-style: normal;
                    font-variant-caps: normal;
                    font-weight: normal;
                    letter-spacing: normal;
                    text-align: start;
                    text-indent: 0px;
                    text-transform: none;
                    white-space: normal;
                    word-spacing: 0px;
                    -webkit-text-stroke-width: 0px;
                    background-color: rgb(255, 255, 255);
                    text-decoration: none;
                    margin-top: 5px;">

    <table style="width: 1177px;box-shadow: rgba(0, 0, 0, 0.431373) 2px 3px 3px 1px;">
        <tbody>
        <tr style="break-inside: avoid">
            <th colspan="5" style="break-inside: avoid; text-align: left; padding: 12px; font-size: 20px; background-color: #ffb200; color: rgb(255, 255, 255); font-family: &quot;Trebuchet MS&quot;">
                Car Details
            </th>
        </tr>
        <tr style="break-inside: avoid">
            <th class="passengerDetailsheads">Vendor</th>
            <th class="passengerDetailsheads">Car Type</th>
            @if($car['carInfo']['images'] != '')
                <th class="passengerDetailsheads">Car Image</th>
            @endif
            <th class="passengerDetailsheads">Pick Up</th>
            <th class="passengerDetailsheads">Drop Off</th>
        </tr>

            <tr style="break-inside: avoid">
                <td class="passengerdetails">{{ $car['vendorName'] }}</td>
                <td class="passengerdetails">{{ $car['carInfo']['carType'] }}</td>
                    <td class="passengerdetails">
                        @if(count($car['carInfo']['images']) != 0)
                            <img src="{{ $car['carInfo']['images'][0]['Url'] }}" alt="" style="height: 100px">
                        @endif
                    </td>
                <td class="passengerdetails">
                    {{ Carbon\Carbon::parse($data->pickupDate)->toFormattedDateString() }}<br>
                    {{ $data->pickupTime }}<br>
                    {{ $car['pickUpLocation'] }}
                </td>
                <td class="passengerdetails">
                    {{ \Carbon\Carbon::parse($data->returnDate)->toFormattedDateString() }}<br>
                    {{ $data->returnTime  }}<br>
                    {{ $car['returnLocation'] }}
                </td>
            </tr>

        </tbody>
    </table>
</div>
<br style="caret-color: rgb(0, 0, 0);font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration: none">

<table style="width: 1177px; -webkit-box-shadow: rgba(0, 0, 0, 0.431373) 2px 3px 3px 1px; box-shadow: rgba(0, 0, 0, 0.431373) 2px 3px 3px 1px">
    <tbody>
    <tr style="break-inside: avoid">
        <th style="break-inside: avoid; text-align: left; padding: 12px; font-size: 20px; background-color: #ffb200; color: rgb(255, 255, 255); font-family: &quot;Trebuchet MS&quot;">
            Total Price Details
        </th>
    </tr>
    <tr style="break-inside: avoid">
        <td style="break-inside: avoid; text-align: center; font-family: &quot;Trebuchet MS&quot;; color: rgb(108, 108, 108); font-size: 20px; padding: 20px 30px; border-left-width: 1px; border-left-style: solid; border-left-color: rgb(192, 192, 192); border-right-width: 1px; border-right-style: solid; border-right-color: rgb(192, 192, 192); vertical-align: top">Total Price</td>
    </tr>
    @php
        use Illuminate\Support\Arr;
    //$carCharges = array_column($car['fareInfo'],'Amount','ChargeType')
         $totalPaid = $car['fareInfo']->where('ChargeType','totalPrice');

            if(count(array_column(json_decode(json_encode($car['fareInfo']),true),'redeemedFare')) == 1){
                $payment = 0;
                $redeemMessage = '( You spent '.$redeemPoints.' points )';
            }else{
                $payment = $totalPaid->first()['Amount'];
                $redeemMessage = '';
            }
    @endphp

    <tr style="break-inside: avoid">
        <td style="break-inside: avoid; text-align: center; font-family: &quot;Trebuchet MS&quot;; color: #ffb200; font-size: 16px; padding: 10px 30px 5px; font-weight: bold; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(192, 192, 192); border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(192, 192, 192); vertical-align: top">
            $ {{ number_format($payment,2)  }}   {{ $redeemMessage }}
        </td>
    </tr>
    </tbody>
</table>

<br style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration: none">
<br style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration: none">

<table style="width: 1177px; -webkit-box-shadow: rgba(0, 0, 0, 0.431373) 2px 3px 3px 1px; box-shadow: rgba(0, 0, 0, 0.431373) 2px 3px 3px 1px; caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none; background-color: rgb(245, 245, 245)">
    <tbody>
    <tr style="break-inside: avoid">
        <td style="break-inside: avoid; width: 1153px; text-align: left; font-family: &quot;Trebuchet MS&quot;; color: rgb(108, 108, 108); font-size: 16px; padding: 10px; line-height: 27px">
            <b>Thank you</b>
            <br>
            <b>Fare33</b>
        </td>
    </tr>
    </tbody>
</table>

</body>
</html>
